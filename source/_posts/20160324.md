---
title: 'ES6解构赋值'
date: 2016-03-24 12:23:39
tags:
---
ES6解构赋值
<!--more-->
### 解构赋值
**解构赋值**语法是一个`Javascript`表达式，这使得可以将数据从数组或对象提取到不同的变量中。
#### 数组的解构

##### 基本用法
- 左边的变量按右边设置项的顺序赋值；
- 空数组时，右边变量为`undefined`;
- 不可遍历（不具备`Ietarator`接口）时报错。

##### 默认值
- 设置默认值后，会采用`===`严格判断左边对应于右边的变量是否为`undefined`，若成功则默认值生效；
- 默认值是一个函数或表达式时，是**惰性**计算的；
- 默认值可以是解构值的其他变量，但是该变量必须在使用时已经声明。


#### 对象的解构

#### 基本用法
- 左边的变量按右边相对应的名称赋值，如找不到相对应的名称，这解构失败；
- 如想左边声明的变量和右边属性名不对应, 则必须采用`let { foo: faz} = {'foo': 123}//faz= 123`形式，但是此时`foo`不会赋值，这种情况在对象的嵌套结构中特别易出错；
- 可以设置默认值，设置方法和数组解构相同。
- 注意 `var x; {x}= {'x': 2}`这种写法会报错， 因为`JavaScript`引擎认为`{}`开头的是代码块，不是语句。正确写法是添加一对括号：`var x; ({x} = {'x': 2})`。

#### 其他数据结构的解构
 解构的规则是只要左边的值不是数组或对象，就先将其转换为类数组或对象（主要根据其原生实现的`Ieterator`接口），然后再进行解构。比如类数组的字符串：`let {length: len} = 'hello';//len = 5`。

#### 实例
- 函数参数的解构和默认值
```js
//参数
function add([x, y]){
    return x + y;
}


//参数默认值
function move({x=0, y=0}){
    return [x, y];
}

//注意下面函数的写法
function move({x, y} = {x: 0, y = 0}){
    return [x, y];
}

move({x: 3, y: 4}) //[3, 4];
move({x: 3})//[3, undefined];
move({}) //[undefined, undefined]
move() //[0, 0]

//上面的代码是为`move`函数参数指定默认值， 而不是为`x`和`y`指定默认值。
```


